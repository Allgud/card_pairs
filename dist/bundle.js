(()=>{"use strict";var t={tag:"div",classNames:["level__choice"],content:[{tag:"h2",classNames:["level__title"],content:"Выбери сложность"},{tag:"ul",classNames:["level__list"],content:[{tag:"li",classNames:["level__item"],content:[{tag:"button",classNames:["level__button"],attrs:{"data-value":"easy"},content:"1"}]},{tag:"li",classNames:["level__item"],content:[{tag:"button",classNames:["level__button"],attrs:{"data-value":"medium"},content:"2"}]},{tag:"li",classNames:["level__item"],content:[{tag:"button",classNames:["level__button"],attrs:{"data-value":"hard"},content:"3"}]}]},{tag:"button",classNames:["btn","choice__btn"],content:"Старт"}]},n={tag:"div",classNames:["gamescreen"],content:[{tag:"div",classNames:["game__header"],content:[{tag:"div",classNames:["game__timer"],content:[{tag:"span",classNames:["timer__minutes"],content:"00."},{tag:"span",classNames:["timer__seconds"],content:"00"}]},{tag:"button",classNames:["btn","btn__restart"],content:"Начать заново"}]},{tag:"div",classNames:["game__board"],content:[{tag:"div",classNames:["cards__field"],content:""}]}]},e={tag:"div",classNames:["final__screen"],content:[{tag:"div",classNames:["final__box"],content:[{tag:"img",classNames:["final__img"],content:""},{tag:"h2",classNames:["final__title"],content:"Вы выиграли!"},{tag:"div",classNames:["final__time"],content:[{tag:"h3",classNames:["time__title"],content:"Затраченное время:"},{tag:"div",classNames:["final__timer"],content:"00.00"}]},{tag:"button",classNames:["btn","btn__restart"],content:"Играть снова"}]}]};function s(t){if(null==t)return document.createTextNode("");if("string"==typeof t||"number"==typeof t)return document.createTextNode(t);if(Array.isArray(t)){var n=document.createDocumentFragment();return t.forEach((function(t){var e=s(t);n.appendChild(e)})),n}var e=document.createElement(t.tag);t.classNames&&t.classNames.filter(Boolean).forEach((function(t){return e.classList.add(t)})),t.attrs&&Object.entries(t.attrs).forEach((function(n){var s=n[0];n[1],e.setAttribute(s,t.attrs?t.attrs[s]:"")}));var a=s(t.content);return e.appendChild(a),e}const a={renderScreen:function(t,n,e){t.textContent="",t.appendChild(s(n)),e.fn.forEach((function(t){return t()}))}};var c={win:{src:"./assets/win__icon.png",alt:"Победа",content:"Вы победили!"},lose:{src:"./assets/lose__icon.png",alt:"Поражение",content:"Вы проиграли!"}};const o={easy:{cards:6},medium:{cards:12},hard:{cards:18}};function r(t){for(var n,e,s=t.slice(0),a=s.length-1;a>0;a--)e=s[n=Math.floor(Math.random()*(a+1))],s[n]=s[a],s[a]=e;return s}const i=[{src:"./assets/6_бубны.png",notation:"6D"},{src:"./assets/7_бубны.png",notation:"7D"},{src:"./assets/8_бубны.png",notation:"8D"},{src:"./assets/9_бубны.png",notation:"9D"},{src:"./assets/10_бубны.png",notation:"10D"},{src:"./assets/валет_бубны.png",notation:"JD"},{src:"./assets/дама_бубны.png",notation:"QD"},{src:"./assets/король_бубны.png",notation:"KD"},{src:"./assets/туз_бубны.png",notation:"AD"},{src:"./assets/6_черви.png",notation:"6H"},{src:"./assets/7_черви.png",notation:"7H"},{src:"./assets/8_черви.png",notation:"8H"},{src:"./assets/9_черви.png",notation:"9H"},{src:"./assets/10_черви.png",notation:"10H"},{src:"./assets/валет_черви.png",notation:"JH"},{src:"./assets/дама_черви.png",notation:"QH"},{src:"./assets/король_черви.png",notation:"KH"},{src:"./assets/туз_черви.png",notation:"AH"},{src:"./assets/6_крести.png",notation:"6C"},{src:"./assets/7_крести.png",notation:"7C"},{src:"./assets/8_крести.png",notation:"8C"},{src:"./assets/9_крести.png",notation:"9C"},{src:"./assets/10_крести.png",notation:"10C"},{src:"./assets/валет_крести.png",notation:"JC"},{src:"./assets/дама_крести.png",notation:"QC"},{src:"./assets/король_крести.png",notation:"KC"},{src:"./assets/туз_крести.png",notation:"AC"},{src:"./assets/6_пики.png",notation:"6S"},{src:"./assets/7_пики.png",notation:"7S"},{src:"./assets/8_пики.png",notation:"8S"},{src:"./assets/9_пики.png",notation:"9S"},{src:"./assets/10_пики.png",notation:"10S"},{src:"./assets/валет_пики.png",notation:"JS"},{src:"./assets/дама_пики.png",notation:"QS"},{src:"./assets/король_пики.png",notation:"KS"},{src:"./assets/туз_пики.png",notation:"AS"}],l=function(){function t(t,n){this.element=t,this.src=n.src,this.notation=n.notation,this.cardTemplate={tag:"div",classNames:["card__container"],content:[{tag:"div",classNames:["card"],attrs:{"data-note":"".concat(this.notation)},content:[{tag:"div",classNames:["back"],content:""},{tag:"div",classNames:["front"],content:[{tag:"img",classNames:[""],attrs:{src:"".concat(this.src),alt:"".concat(this.notation)},content:""}]}]}]}}return t.prototype.render=function(){this.element.append(s(this.cardTemplate))},t}(),d=function(){function t(t,n){this.minEl=t,this.secEl=n,this.seconds=0,this.minutes=0}return t.prototype.start=function(){var t=this;this.interval=setInterval((function(){t.seconds+=1,t.render()}),1e3)},t.prototype.stop=function(){clearInterval(this.interval)},t.prototype.render=function(){this.seconds<=9&&(this.secEl.textContent="0".concat(this.seconds)),this.seconds>9&&(this.secEl.textContent=this.seconds.toString()),this.minutes>9&&(this.minEl.textContent=this.minutes.toString()),this.seconds>59&&(this.minutes++,this.minEl.textContent="0".concat(this.minutes,"."),this.seconds=0,this.secEl.textContent="0".concat(this.seconds))},t.prototype.getMinutes=function(){return this.minutes>9?this.minutes.toString():"0".concat(this.minutes)},t.prototype.getSeconds=function(){return this.seconds>9?this.seconds.toString():"0".concat(this.seconds)},t}();var u=document.querySelector(".app");window.addEventListener("DOMContentLoaded",(function(){a.renderScreen(u,t,m)}));var m={fn:[function(){var t=document.querySelector(".level__list"),e=document.querySelector(".btn");null==t||t.addEventListener("click",(function(n){for(var e,s=n.target,c=0;c<t.children.length;c++)t.children[c].classList.remove("active");null===(e=s.parentElement)||void 0===e||e.classList.add("active"),a.level=s.dataset.value})),e.addEventListener("click",(function(){a.renderScreen(u,n,_)}))}]},_={fn:[function(){var t,n=document.querySelector(".cards__field"),e=o[a.level],c=function(t){var n=r(Array(36).join("0").split("0").map((function(t,n){return n+1}))).slice(0,t);return r(n.concat(n))}(e.cards/2);t=n,e.cards===o.medium.cards&&t.classList.add("level2"),v("same-level"),c.forEach((function(t){new l(n,i[t]).render()})),n.addEventListener("click",(function(t){var e,c,r,i,l=t.target.parentElement;"card"===(null==l?void 0:l.classList.value)&&(function(t){t.classList.add("card--open");var n=t.dataset.note;if(a.currentCard)return a.currentCard&&n===a.currentCard?(a.currentCard=void 0,void document.querySelectorAll(".card--open").forEach((function(t){t.classList.remove("card--open"),t.classList.add("card--fixed")}))):void(a.currentCard&&n!==a.currentCard&&(a.currentCard=void 0,g("stop"),setTimeout((function(){u.appendChild(s(p("lose"))),v("new-game")}),500)));a.currentCard=n}(l),c=n.querySelectorAll(".card--fixed"),r=void 0!==a.level?a.level:"",i=o[r].cards,c.length===i&&(null===(e=a.timer)||void 0===e||e.stop(),setTimeout((function(){u.appendChild(s(p("win"))),v("new-game")}),800)))}))},function(){var t=document.querySelectorAll(".card");t.forEach((function(t){return t.classList.add("card--open")})),setTimeout((function(){t.forEach((function(t){return t.classList.remove("card--open")})),g("start")}),5e3)},function(){var t=document.querySelector(".timer__minutes"),n=document.querySelector(".timer__seconds"),e=new d(t,n);a.timer=e}]};function g(t){var n,e;"start"!==t?null===(e=a.timer)||void 0===e||e.stop():null===(n=a.timer)||void 0===n||n.start()}function p(t){var n=document.querySelector(".gamescreen"),s=c[t],o=e,r=a.timer,i="".concat(null==r?void 0:r.getMinutes(),".").concat(null==r?void 0:r.getSeconds());return o.content[0].content[0].attrs={src:s.src,alt:s.alt},o.content[0].content[1].content=s.content,o.content[0].content[2].content[1].content=i,null==n||n.classList.add("opacity"),o}function v(e){for(var s=u.querySelectorAll(".btn__restart"),c=0;c<s.length;c++)s[c].addEventListener("click",(function(){"same-level"===e&&a.renderScreen(u,n,_),"new-game"===e&&a.renderScreen(u,t,m)}))}})();